import {putMessage,intersect,SS_VALID} from '../Base.js'
import MA1_group from '../ADRG/MA1.js';
import MB1_group from '../ADRG/MB1.js';
import MC1_group from '../ADRG/MC1.js';
import MD1_group from '../ADRG/MD1.js';
import MJ1_group from '../ADRG/MJ1.js';
import MR1_group from '../ADRG/MR1.js';
import MS1_group from '../ADRG/MS1.js';
import MZ1_group from '../ADRG/MZ1.js';

export default function MDCM_group(record){
    let mdc_zd=["Q55.604","D07.400","D40.901","N43.201","A58.x00","N49.203","N48.400x007","Q56.300","N42.000","Q53.000","N44.x00","N49.103","I89.000x022","Q55.901","N50.900x006","N48.802","N48.807","D40.701","R93.802","Q55.501","C63.200","R86.600","N50.807","C62.100","N42.101","R86.900x003","N42.901","N48.809","N48.800x005","N48.810","N50.810","S31.300x002","N41.900x002","L29.100","A06.800x004+N51.2*","N46.x00x007","N48.804","D29.100","A18.100x031","Q53.202","D29.703","Q55.801","Q56.100","N45.908","D07.603","S38.001","C60.201","N42.801","C60.900","N49.001","Q53.000x002","S39.900x007","N41.200","C63.702","N50.800x012","N50.900x007","N45.002","N42.802","N48.813","N48.805","Q55.200x901","D07.402","D40.700x001","K65.013","N49.102","R86.400","R86.700","D40.001","A51.001","N50.800x025","Q53.200","S31.200","I86.100","N50.826","D07.601","N49.104","Q55.403","N50.827","N50.800x023","R86.000","Q53.901","N43.101","A51.002","D07.602","D29.001","N50.800x041","Q55.600x009","N43.000","N49.204","C63.701","N50.800x027","D29.400","Q53.102","R86.903","N49.002","N43.300","N49.101","D29.200","N50.100x001","C62.900","D29.701","Q55.002","Q56.001","N48.402","A18.110+N51.8*","N48.201","A18.100x020+N51.8*","N97.400x002","Z31.000x004","T83.600","Q55.606","Q55.605","S30.205","S31.300x001","N49.800","C63.100","N45.907","C79.819","D40.101","C79.815","Q55.101","N43.302","Q55.201","S39.904","S30.206","Z41.200","D17.700x033","N41.900x001","S39.900x010","N45.903","D29.702","N50.800x042","N48.400x008","N48.806","I86.101","E29.101","N40.x00","R86.800","Q55.603","I89.000x024","Q55.800x001","Q55.402","N48.808","N50.805","S37.811","Q55.004","N48.400x005","A54.202+N51.0*","N50.101","I89.800x010","N44.x02","R86.100","N50.902","N41.101","Q53.201","Q55.404","S38.200x003","N50.801","N50.823","Q55.802","A60.000x004+N51.8*","C79.816","I89.000x025","D29.900","C60.200","N50.811","T19.800x002","N50.903","N50.814","T83.601","N50.819","Q53.000x003","A57.x00x002","N42.200","N40.x01","N50.818","A54.203+N51.1*","N50.822","A56.103+N51.1*","N43.100","B26.000+N51.1*","D07.401","C62.001","N50.812","Q55.202","D29.700x004","R86.902","N50.000","N50.800x038","Q55.900","C63.000","N49.201","C60.800","R86.901","N50.803","S38.200x005","A18.100x018+N51.8*","E10.400x360+G99.0*","N46.x01","S30.208","A18.118+N51.1*","D40.900x001","Q55.600x008","Q55.602","S38.000","N50.820","A54.204+N51.1*","N43.301","N47.x00x001","C79.800x228","N45.905","A60.900","N43.001","N46.x00","N50.900x005","D40.702","A51.000","D18.108","N48.101","C62.000","D29.401","N50.817","A57.x00x003","D40.700x002","Q55.600x007","Q55.300","S31.301","Q55.400x006","D17.700x034","N47.x02","C62.901","I86.200","A18.109+N51.0*","N50.816","A63.002","N50.102","C60.000","C60.100","Q55.100x002","C63.201","N45.901","N43.400","E29.102","C79.820","Q53.101","N42.102","A18.116+N51.8*","I89.008","R86.500","C79.800x231","D40.704","N48.301","N45.906","N45.001","A56.102+N51.1*","Q96.300","Q53.100","Q53.902","N50.800x016","N48.400","D40.100x002","N48.600","D29.000","E14.400x360+G99.0*","N50.802","Q53.900","C79.800x233","A06.800x003","N45.904","Q85.900x032","N48.000","N48.300","N42.301","D29.700x005","N45.000","N50.103","D40.703","D48.127","A18.117+N51.1*","R86.200","N48.202","N50.900x008","D17.600x001","D18.000x818","S38.200x004","S37.804","N48.500","C63.700","N41.100","Q53.100x001","S37.910","A60.001","C63.900","N50.825","S31.501","Q56.000","N48.803","C63.801","A59.000x003+N51.0*","C76.303","N50.821","C60.901","D29.300","N48.811","N50.824","S37.801","N36.801","N50.800x024","Q55.001","N50.800x002","N97.400x001","N48.812","R86.300","N50.800x028","N41.000","B37.402+N51.2*","N48.800x009","S30.202","N50.804","N50.813","L29.300","Q55.401","E11.400x360+G99.0*","N49.205","N49.900","D07.500","E29.000","N48.000x003","Q55.203","D40.000x001","E29.800","Q55.502","K65.014","N50.809","Q56.400","N50.800","N50.800x001","I87.804","N48.102","Q55.405","N44.x01","N48.001","N49.202","A18.119+N51.8*","T83.401","N50.901","N48.100","Q55.601","D40.700x003","N48.403","N47.x01","Q53.200x001","N47.x03","D18.000x815","N48.203","I89.000x023","C63.800","S39.900x009","S30.203","Q55.800","N50.808","S37.802","N42.300","K65.015","N46.x02","A51.000x002","N48.801","N48.401","C79.818","N50.815","N50.800x014","A60.003+N51.8*","C61.x00","I87.120","N48.204","N48.901","N48.400x006","C79.817","N45.902","B45.800x002","Q56.002","A18.100x021+N37.8*","Q55.400x008","Q55.003","N50.806","E89.501","N41.800"];
    let dept_list=[];
    if (!(true && mdc_zd.includes(record.zdList[0]) && record.gender && record.gender=="1")){
        return '';
    }
    
    putMessage('符合MDCM入组条件，匹配规则：主诊断匹配、男性');
    let result;

    if (result=MA1_group(record)){
        return result;
    }

    if (result=MB1_group(record)){
        return result;
    }

    if (result=MC1_group(record)){
        return result;
    }

    if (result=MD1_group(record)){
        return result;
    }

    if (result=MJ1_group(record)){
        return result;
    }

    if (false && record.ssList && intersect(SS_VALID,record.ssList)){
        putMessage('符合MQY入组条件，存在有效手术操作：'+record.ssList.filter(x=>SS_VALID.includes(x)).join(','));
        return 'MQY';
    }

    if (result=MR1_group(record)){
        return result;
    }

    if (result=MS1_group(record)){
        return result;
    }

    if (result=MZ1_group(record)){
        return result;
    }
 
    putMessage('不符合MDCA的ADRG入组条件');
}